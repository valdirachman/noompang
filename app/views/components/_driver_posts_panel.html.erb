<div class="panel panel-default">
  <div class="row">
    <div class="col-sm-12 panel-title">
      <h4> My Ride Offers </h4>
    </div>
  </div>

    <% if !driver_posts.empty? %>
      <% for post in driver_posts %>
      <div>
        <div>
        <div class="panel-body row">
          <div class="col-xs-2" style="padding-top:10px;" id="post-image-avatar">
            <%= image_tag post.user.profile.avatar.url(:thumb), class: "avatar avatar-post img-rounded" %>
          </div>
          <div class="col-xs-10" style="border-left: 0.5px solid;border-color:#e3e3e3">
            <p class="post-title"><span class="post-owner"><b><%= link_to post.user.username, user_profile_path(post.user.username) %></b></span><span class="post-creation"> <%= time_ago_in_words(post.created_at) %></span></p>
            <p class="post-date"><span class="post-date-time">
              <% if post.date === Date.today %>
                <%= post.date.strftime("Today, %-d %b") %>
              <% else %>
                <%= post.date.strftime("%A, %-d %b") %>
              <% end %>
              - <%= post.time.strftime("%H:%M")  %>
            </span></p>
            <p class="post-content">
              <span class="post-destination">
                <img src="/images/from-circle.png" style="max-height:12px; margin-top:-3px;" data-toggle="tooltip" data-placement="top" title="Pick-up">
                <%= post.from %>
                <img src="/images/arrow.png" style="max-height:6px;">
                <img src="/images/to-circle.png" style="max-height:12px; margin-top:-3px;" data-toggle="tooltip" data-placement="bottom" title="Drop-off">
                <%= post.destination %>
              </span>
            </p>
            <div class="row" style="margin-left:-15px">

              <div class="col-sm-6">
            <p style="font-weight:400; padding-left:10px;"><b style="font-size:22px"><%= post.available_seats%></b> seats available out of <%= post.quantity %></p>
          </div>
          <div class="col-sm-6">
            <p style="font-weight:400; padding-left:10px;"> IDR <b style="font-size:22px"><%= post.price %></b> per seat</p>
          </div>
          <div class="col-sm-12">

          <% if post.note && post.note != "" %>
            <p style="font-weight:400; padding: 5px 0 10px 10px"><img src="/images/notes.png" style="max-height:15px; margin-top:-3px;"> <%= post.note %></p>
          <% end %>
        </div>
          <% if post.reserved? %>
            <div class="col-sm-12" style="margin: 10px 0 10px 0">
              <p style="font-weight:400; padding-left:10px;"><b>Passengers:</p></b>
              <ul>

              <% for request in post.reserved_requests %>
                <%= link_to user_profile_path(request.user.username) do%>
                  <li  style="display:inline-block" data-toggle="tooltip" data-placement="top" title="<%= request.user.username %>"><%= image_tag request.user.profile.avatar.url(:thumb), class: "avatar avatar-post img-rounded avatar-hover", style: "margin: 5px 5px 5px 15px" %></li> <% end %>
              <% end %>
              </ul>
            </div>
          <% end %>
            </div>
            <% if post.user != current_user %>
              <% if !post.reserved_by_user?(current_user.id) %>
                <%= form_for DirectBooking.new, url: direct_bookings_path do |f| %>
                  <%= f.hidden_field :user_id, value: current_user.id %></td>
                  <%= f.hidden_field :driver_post_id, value: post.id %></td>
                  <%= submit_tag "Join this ride", class: "btn btn-success btn-xs", style: "float:right" %>
                <% end %>
              <% else %>
                <% case post.get_reserve_status_by_user(current_user.id)
                when 0 %> <div class="alert alert-danger" style="padding: 5px 0px 5px 10px;"> Status: Waiting for driver's approval</div>
                <% when 1 %> <div class="alert alert-success" style="padding: 5px 0px 5px 10px;">You are in this ride </div>
                <% end %>
              <% end %>
            <% end %>
            <% if post.user == current_user %>
              <span class="post-icon pull-right">
                <%= link_to post, method: :delete do %>
                  <span class="glyphicon glyphicon-trash"></span>
                <% end %>
              </span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
                <hr>
      <% end %>
      <%else %>
      <div class="panel-body">
      <p> There's no active ride offer </p>
      </div>
      <%end%>
      </div>
